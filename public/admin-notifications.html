<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üîî Notifications - Rajasthan Seva Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #2c3e50; overflow-x: hidden; }
    .admin-layout { display: flex; min-height: 100vh; }
    .sidebar { width: 280px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); z-index: 1000; position: fixed; height: 100vh; overflow-y: auto; }
    .sidebar-header { padding: 2rem 1.5rem; border-bottom: 1px solid rgba(102, 126, 234, 0.1); text-align: center; }
    .admin-logo { font-size: 24px; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 0.5rem; }
    .admin-subtitle { font-size: 12px; color: #64748b; font-weight: 500; }
    .nav-menu { padding: 1rem 0; }
    .nav-item { list-style: none; margin: 0.25rem 0; }
    .nav-link { display: flex; align-items: center; gap: 12px; padding: 0.75rem 1.5rem; color: #64748b; text-decoration: none; transition: all 0.3s ease; border-radius: 0 25px 25px 0; margin-right: 1rem; font-weight: 500; }
    .nav-link:hover { background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); color: #667eea; transform: translateX(5px); }
    .nav-link.active { background: linear-gradient(135deg, #667eea, #764ba2); color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
    .nav-link i { width: 20px; text-align: center; font-size: 16px; }
    .badge { background: #ef4444; color: white; font-size: 11px; padding: 2px 6px; border-radius: 10px; font-weight: 600; margin-left: auto; }
    .main-content { margin-left: 280px; flex: 1; padding: 2rem; background: rgba(255, 255, 255, 0.05); }
    .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .page-title { color: white; font-size: 2rem; font-weight: 700; }
    .admin-actions { display: flex; gap: 1rem; align-items: center; }
    .admin-profile { display: flex; align-items: center; gap: 12px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 0.5rem 1rem; border-radius: 25px; color: white; }
    .profile-avatar { width: 40px; height: 40px; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; }
    .logout-btn { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); padding: 0.5rem 1rem; border-radius: 8px; text-decoration: none; font-weight: 500; transition: all 0.3s ease; }
    .logout-btn:hover { background: #ef4444; color: white; }
    .notifications-container { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); }
    .notification-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .section-title { font-size: 1.5rem; font-weight: 700; color: #1f2937; }
    .notification-actions { display: flex; gap: 1rem; }
    .btn { padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; border: none; display: inline-flex; align-items: center; gap: 0.5rem; }
    .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3); }
    .btn-secondary { background: rgba(102, 126, 234, 0.1); color: #667eea; border: 1px solid rgba(102, 126, 234, 0.2); }
    .notification-filters { display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; }
    .filter-select { padding: 0.5rem 1rem; border: 1px solid rgba(102, 126, 234, 0.2); border-radius: 8px; background: white; font-size: 0.875rem; }
    .notifications-list { max-height: 600px; overflow-y: auto; }
    .notification-item { display: flex; gap: 1rem; padding: 1.5rem; border-bottom: 1px solid rgba(0, 0, 0, 0.05); transition: all 0.3s ease; }
    .notification-item:hover { background: rgba(102, 126, 234, 0.02); }
    .notification-item.unread { background: rgba(102, 126, 234, 0.05); border-left: 4px solid #667eea; }
    .notification-icon { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; flex-shrink: 0; }
    .icon-info { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
    .icon-success { background: rgba(16, 185, 129, 0.1); color: #10b981; }
    .icon-warning { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
    .icon-error { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
    .notification-content { flex: 1; }
    .notification-title { font-size: 1rem; font-weight: 600; color: #1f2937; margin-bottom: 0.5rem; }
    .notification-message { font-size: 0.875rem; color: #64748b; line-height: 1.6; margin-bottom: 0.75rem; }
    .notification-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.75rem; color: #9ca3af; }
    .notification-time { font-weight: 500; }
    .notification-category { background: rgba(102, 126, 234, 0.1); color: #667eea; padding: 0.25rem 0.75rem; border-radius: 12px; font-weight: 600; }
    .notification-actions-item { display: flex; gap: 0.5rem; }
    .action-btn { width: 32px; height: 32px; border-radius: 8px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
    .btn-mark-read { background: rgba(16, 185, 129, 0.1); color: #10b981; }
    .btn-delete { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
    .action-btn:hover { transform: translateY(-1px); }
    .empty-state { text-align: center; padding: 3rem; color: #64748b; }
    .empty-icon { font-size: 4rem; margin-bottom: 1rem; opacity: 0.5; }
    @media (max-width: 1024px) { .sidebar { transform: translateX(-100%); } .main-content { margin-left: 0; } }
    @media (max-width: 768px) { .main-content { padding: 1rem; } .notification-filters { flex-direction: column; } }
  </style>
</head>
<body>
  <div class="admin-layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="admin-logo">üèõÔ∏è Admin Portal</div>
        <div class="admin-subtitle">Rajasthan Seva Management</div>
      </div>
      <nav>
        <ul class="nav-menu">
          <li class="nav-item"><a href="admin.html" class="nav-link"><i class="fas fa-chart-pie"></i><span>Dashboard</span></a></li>
          <li class="nav-item"><a href="admin-complaints.html" class="nav-link"><i class="fas fa-inbox"></i><span>All Complaints</span><span class="badge">247</span></a></li>
          <li class="nav-item"><a href="admin-analytics.html" class="nav-link"><i class="fas fa-chart-line"></i><span>Analytics</span></a></li>
          <li class="nav-item"><a href="admin-users.html" class="nav-link"><i class="fas fa-users"></i><span>Users Management</span></a></li>
          <li class="nav-item"><a href="admin-departments.html" class="nav-link"><i class="fas fa-building"></i><span>Departments</span></a></li>
          <li class="nav-item"><a href="admin-reports.html" class="nav-link"><i class="fas fa-file-alt"></i><span>Reports</span></a></li>
          <li class="nav-item"><a href="admin-settings.html" class="nav-link"><i class="fas fa-cog"></i><span>Settings</span></a></li>
          <li class="nav-item"><a href="admin-notifications.html" class="nav-link active"><i class="fas fa-bell"></i><span>Notifications</span><span class="badge">3</span></a></li>
          <li class="nav-item"><a href="index.html" class="nav-link"><i class="fas fa-home"></i><span>Back to Portal</span></a></li>
        </ul>
      </nav>
    </aside>
    
    <main class="main-content">
      <div class="top-bar">
        <h1 class="page-title">Notifications Center</h1>
        <div class="admin-actions">
          <div class="admin-profile">
            <div class="profile-avatar">AD</div>
            <span>Admin User</span>
          </div>
          <a href="#" id="logoutBtn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
      </div>
      
      <div class="notifications-container">
        <div class="notification-header">
          <h2 class="section-title">üîî System Notifications (12)</h2>
          <div class="notification-actions">
            <button class="btn btn-secondary" onclick="markAllRead()">Mark All Read</button>
            <button class="btn btn-primary" onclick="createNotification()">Send Notification</button>
          </div>
        </div>
        
        <div class="notification-filters">
          <select class="filter-select" id="typeFilter">
            <option value="">All Types</option>
            <option value="system">System</option>
            <option value="complaint">Complaints</option>
            <option value="user">Users</option>
            <option value="security">Security</option>
          </select>
          
          <select class="filter-select" id="priorityFilter">
            <option value="">All Priorities</option>
            <option value="high">High Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="low">Low Priority</option>
          </select>
          
          <select class="filter-select" id="statusFilter">
            <option value="">All Status</option>
            <option value="unread">Unread</option>
            <option value="read">Read</option>
          </select>
        </div>
        
        <div class="notifications-list" id="notificationsList">
          <!-- Notifications will be loaded here -->
        </div>
      </div>
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if(localStorage.getItem("role") !== "admin" || !localStorage.getItem("token")) {
        window.location.href = "admin-login.html";
      }
      
      loadNotifications();
      setupFilters();
    });
    
    document.getElementById('logoutBtn').onclick = function(e){
      e.preventDefault();
      localStorage.clear();
      window.location.href = "admin-login.html";
    };
    
    const sampleNotifications = [
      {
        id: 1,
        type: "complaint",
        priority: "high",
        status: "unread",
        title: "Critical Water Supply Issue",
        message: "Multiple complaints received about water contamination in Jaipur Sector 15. Immediate attention required.",
        time: "2 minutes ago",
        category: "Emergency",
        icon: "fas fa-exclamation-triangle",
        iconClass: "icon-error"
      },
      {
        id: 2,
        type: "system",
        priority: "medium",
        status: "unread",
        title: "System Backup Completed",
        message: "Daily system backup completed successfully. All data has been securely archived.",
        time: "1 hour ago",
        category: "System",
        icon: "fas fa-check-circle",
        iconClass: "icon-success"
      },
      {
        id: 3,
        type: "user",
        priority: "low",
        status: "unread",
        title: "New User Registration Spike",
        message: "47 new users registered in the last 24 hours. User engagement is increasing.",
        time: "3 hours ago",
        category: "Users",
        icon: "fas fa-user-plus",
        iconClass: "icon-info"
      },
      {
        id: 4,
        type: "complaint",
        priority: "medium",
        status: "read",
        title: "Road Repair Request Update",
        message: "PWD has acknowledged the road repair request for MG Road. Work scheduled to begin next week.",
        time: "6 hours ago",
        category: "Infrastructure",
        icon: "fas fa-road",
        iconClass: "icon-warning"
      },
      {
        id: 5,
        type: "security",
        priority: "high",
        status: "read",
        title: "Failed Login Attempts",
        message: "Multiple failed login attempts detected from IP 192.168.1.100. Security protocols activated.",
        time: "1 day ago",
        category: "Security",
        icon: "fas fa-shield-alt",
        iconClass: "icon-error"
      }
    ];
    
    let notifications = [...sampleNotifications];
    let filteredNotifications = [...notifications];
    
    function loadNotifications() {
      renderNotifications();
    }
    
    function setupFilters() {
      document.getElementById('typeFilter').addEventListener('change', applyFilters);
      document.getElementById('priorityFilter').addEventListener('change', applyFilters);
      document.getElementById('statusFilter').addEventListener('change', applyFilters);
    }
    
    function applyFilters() {
      const typeFilter = document.getElementById('typeFilter').value;
      const priorityFilter = document.getElementById('priorityFilter').value;
      const statusFilter = document.getElementById('statusFilter').value;
      
      filteredNotifications = notifications.filter(notification => {
        return (!typeFilter || notification.type === typeFilter) &&
               (!priorityFilter || notification.priority === priorityFilter) &&
               (!statusFilter || notification.status === statusFilter);
      });
      
      renderNotifications();
    }
    
    function renderNotifications() {
      const container = document.getElementById('notificationsList');
      
      if (filteredNotifications.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üîî</div>
            <h3>No notifications found</h3>
            <p>All caught up! No notifications match your current filters.</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = filteredNotifications.map(notification => `
        <div class="notification-item ${notification.status === 'unread' ? 'unread' : ''}" data-id="${notification.id}">
          <div class="notification-icon ${notification.iconClass}">
            <i class="${notification.icon}"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">${notification.title}</div>
            <div class="notification-message">${notification.message}</div>
            <div class="notification-meta">
              <div class="notification-time">${notification.time}</div>
              <div class="notification-category">${notification.category}</div>
            </div>
          </div>
          <div class="notification-actions-item">
            ${notification.status === 'unread' ? 
              `<button class="action-btn btn-mark-read" onclick="markAsRead(${notification.id})" title="Mark as Read">
                <i class="fas fa-check"></i>
              </button>` : ''
            }
            <button class="action-btn btn-delete" onclick="deleteNotification(${notification.id})" title="Delete">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      `).join('');
      
      // Update badge count
      const unreadCount = notifications.filter(n => n.status === 'unread').length;
      const badge = document.querySelector('.nav-link.active .badge');
      if (badge) {
        badge.textContent = unreadCount;
        if (unreadCount === 0) {
          badge.style.display = 'none';
        } else {
          badge.style.display = 'inline';
        }
      }
    }
    
    function markAsRead(id) {
      const notification = notifications.find(n => n.id === id);
      if (notification) {
        notification.status = 'read';
        applyFilters();
      }
    }
    
    function deleteNotification(id) {
      if (confirm('Are you sure you want to delete this notification?')) {
        notifications = notifications.filter(n => n.id !== id);
        applyFilters();
      }
    }
    
    function markAllRead() {
      if (confirm('Mark all notifications as read?')) {
        notifications.forEach(notification => {
          notification.status = 'read';
        });
        applyFilters();
      }
    }
    
    function createNotification() {
      alert('Send Notification\n\nThis would open a form to:\n‚Ä¢ Create system announcements\n‚Ä¢ Send alerts to users\n‚Ä¢ Schedule notifications\n‚Ä¢ Choose recipients\n‚Ä¢ Set priority levels');
    }
  </script>
</body>
</html>
